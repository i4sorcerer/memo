## 数据库性能瓶颈

### 数据库连接数

### 表数据量大（空间）

1. 阿里有一个空间的标准：表空间多大时性能开始下降（一般来讲超过500万行就要考虑做分库分表）？



### 硬件资源限制(QPS/TPS)

- QPS ：每秒查询数
- TPS：每秒交易数



### 数据性能优化方案有哪些？

1. sql优化（执行计划等等）

2. 缓存（热度高的数据放到缓存中）

3. 建好索引

4. **读写分离**

   数据的存储（增删改）指定写数据源，数据的读取查询指定读数据源

   一般来将读写分离会基于主从复制：**读数据源指定slave节点，写数据源指定master节点**

   

1. **分库分表**

拆分方式：

- 垂直拆分：单一库-> 用户库，订单库，账户库等等

  这样产生的问题：

  1. 事务问题：
  2. 关联查询：mycat可以用全局表，ER方式支持

- 水平拆分：大表->小表（按照一定的拆分规则）

  这样产生问题：

  1. 关联查询：



### Mycat解决此问题的过程

- **解析SQL**
- **数据源管理**
- **数据源分配**
- **请求与响应**
- **结果整合**

